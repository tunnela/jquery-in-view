!function(a,b,c,d){"use strict";function e(b){var c=b.getBoundingClientRect();return 1-c.top/a.innerHeight}function f(b){for(var c=b.offsetTop,d=b.offsetLeft,e=(b.offsetWidth,b.offsetHeight);b.offsetParent;)b=b.offsetParent,c+=b.offsetTop,d+=b.offsetLeft;return(a.pageYOffset+a.innerHeight-c)/e}function g(b,c){var d=b.offsetTop,e=b.offsetLeft,f=b.offsetWidth,g=b.offsetHeight,h=0,i=0,j=0,k=0;for("undefined"!=typeof c&&(h=Math.abs(c.left)>1?c.left:c.left*f,i=Math.abs(c.right)>1?c.right:c.right*f,j=Math.abs(c.top)>1?c.top:c.top*g,k=Math.abs(c.bottom)>1?c.bottom:c.bottom*g);b.offsetParent;)b=b.offsetParent,d+=b.offsetTop,e+=b.offsetLeft;return d+j<a.pageYOffset+a.innerHeight&&e+h<a.pageXOffset+a.innerWidth&&d+g+k>a.pageYOffset&&e+f+i>a.pageXOffset}function h(a,b){var d=c(a),a=d.get(0),e=function(a,b){var c=d.data("iv-"+a);return null==c&&(c=d.attr("iv-"+a)),null==c&&(c=b),c},f=function(b,d){return d=d||!1,c.isFunction(b)?b.apply(a):d?c(b):b},g={},h={},i=null,j=!1,k=0,l={count:parseInt(e("count",1)),classVisible:e("visible","in-view"),classHidden:e("hidden","out-of-view"),classInitial:e("initial","initial-view"),target:e("target",a),offset:e("offset","0"),marker:e("marker",""),markerCount:parseInt(e("marker-count",1)),viewportMarker:e("viewport-marker",""),viewportMarkerCount:parseInt(e("viewport-marker-count",1))};b=c.extend({},l,b);var m=b.offset.split(/\s*,\s*/),n=m.length,o=c.isFunction(b.classInitial)?b.classInitial.apply(a):b.classInitial;d.addClass(o),d.trigger("initial-view");var q={left:m[0],right:m[0],top:m[0],bottom:m[0]};4==n?(q.left=m[3],q.right=m[1],q.bottom=m[2]):2==n&&(q.left=m[1],q.right=m[1]),q.left=parseFloat(e("offset-left",q.left))||0,q.right=parseFloat(e("offset-right",q.right))||0,q.bottom=parseFloat(e("offset-bottom",q.bottom))||0,q.top=parseFloat(e("offset-top",q.top))||0,b.offset=q,b.marker=r(b.marker),b.viewportMarker=r(b.viewportMarker),this.check=function(){if(!j){j=!0;var e=i;i=c.isVisible(a,b.offset);var l=100*c.visiblityFactor(a),m=100*c.viewportVisiblityFactor(a),n=f(b.target,!0),o=f(b.classVisible);if(c.each(b.marker,function(a,c){"undefined"==typeof g[c]&&(g[c]=0),l>=c&&(!b.markerCount||g[c]++<b.markerCount)&&n.addClass(o+"-"+c),c>l&&(!b.markerCount||g[c]<b.markerCount)&&n.removeClass(o+"-"+c)}),c.each(b.viewportMarker,function(a,c){"undefined"==typeof h[c]&&(h[c]=0),m>=c&&(!b.viewportMarkerCount||h[c]++<b.viewportMarkerCount)&&n.addClass(o+"-viewport-"+c),c>m&&(!b.viewportMarkerCount||h[c]<b.viewportMarkerCount)&&n.removeClass(o+"-viewport-"+c)}),e==i)return void(j=!1);var p=f(b.classInitial);if(d.removeClass(p),i){if(d.trigger("in-view"),!b.count||k++<b.count){var q=f(b.classHidden);n.length&&n.addClass(o).removeClass(q),d.trigger("in-view-pass")}}else if(d.trigger("out-of-view"),!b.count||k<b.count){var q=f(b.classHidden);n.length&&n.addClass(q).removeClass(o),d.trigger("out-of-view-pass")}j=!1}},p(a)}var i=!1,j=0,k=[],l={top:0,left:0},m=2,n=c(),o=function(a){var b=c(this).scrollTop(),d=c(this).scrollLeft();b>l.top?m=2:b<l.top?m=0:d>l.left?m=1:d<l.left&&(m=3),l.top=b,l.left=d,n.each(function(){var a=k[c(this).data("in-view")];q(a)&&a.check()})},p=function(b){n=n.add(b),i||(i=!0,c(a).on("load scroll",o))},q=function(a){return a instanceof h},r=function(a){var b=a.split(/\s*,\s*/);""==b[0]&&(b=[]);var d={},e=b.length;if(c.each(b,function(a,b){b=100*(parseFloat(b)||0),d[b]=b}),b.length){var f=b[0].match(/([0-9]+)\s*\/\s*([0-9]+)/);if(1===e&&f)for(var g=parseFloat(f[2])||1,g=(parseFloat(f[1])||0)/(0==g?1:g),h=0,i=1/g;100>=h;h+=i)d[h]=h;d[0]=0,d[100]=100}return d};c.fn.inView=function(a){var b=[],d=this.each(function(){var d=c(this).data("in-view"),e=null;d&&"undefined"!=typeof k[d]?e=k[d]||null:(d=++j,c(this).data("in-view",d)),null!==e&&a?b.push(e):(e=new h(this,a),k[d]=e)}),e=b.length;return e?1===e?b[0]:b:d},c.visiblityFactor=function(a){return f(c(a).get(0))},c.viewportVisiblityFactor=function(a){return e(c(a).get(0))},c.isVisible=function(a,b){return g(c(a).get(0),b)},c(function(){c("[data-iv-detect=false],[iv-detect=false]").first().length||c("[data-iv],[iv]").inView()})}(window,document,window.Zepto||window.jQuery);