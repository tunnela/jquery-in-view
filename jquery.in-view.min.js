/*
 2015, Lauri Tunnela (http://tunne.la)
 @license http://tunne.la/MIT.txt The MIT License
*/
;!function(g,w,f,x){function r(h,a){var c=f(h);h=c.get(0);var e=function(a,f){var b=c.data("iv-"+a);null==b&&(b=c.attr("iv-"+a));null==b&&(b=f);return b},b=function(a,b){b=b||!1;return f.isFunction(a)?a.apply(h):b?f(a):a},k=null,l=!1,p=0,m={count:parseInt(e("count",1)),classVisible:e("visible","in-view"),classHidden:e("hidden","out-of-view"),classInitial:e("initial","initial-view"),target:e("target",h),offset:e("offset","0").split(/\s*,\s*/)};a=f.extend({},m,a);var m=a.offset.length,d=f.isFunction(a.classInitial)?
a.classInitial.apply(h):a.classInitial;c.addClass(d);c.trigger("initial-view");d={left:a.offset[0],right:a.offset[0],top:a.offset[0],bottom:a.offset[0]};4==m?(d.left=a.offset[3],d.right=a.offset[1],d.bottom=a.offset[2]):2==m&&(d.left=a.offset[1],d.right=a.offset[1]);d.left=parseFloat(e("offset-left",d.left))||0;d.right=parseFloat(e("offset-right",d.right))||0;d.bottom=parseFloat(e("offset-bottom",d.bottom))||0;d.top=parseFloat(e("offset-top",d.top))||0;a.offset=d;this.check=function(){if(!l){l=!0;
var d=k;k=f.isVisible(h,a.offset);if(d!=k)if(d=b(a.classInitial),c.removeClass(d),k){if(c.trigger("in-view"),!a.count||p++<a.count){var d=b(a.classHidden),e=b(a.classVisible),g=b(a.target,!0);g.length&&g.addClass(e).removeClass(d);c.trigger("in-view-pass")}}else if(c.trigger("out-of-view"),!a.count||p<a.count)d=b(a.classHidden),e=b(a.classVisible),g=b(a.target,!0),g.length&&g.addClass(d).removeClass(e),c.trigger("out-of-view-pass");l=!1}};q=q.add(h);t||(t=!0,f(g).on("load scroll",u))}var t=!1,v=0,
n=[],q=f(),u=function(g){f(this).scrollTop();f(this).scrollLeft();q.each(function(){var a=n[f(this).data("in-view")];a instanceof r&&a.check()})};f.fn.inView=function(g){var a=[],c=this.each(function(){var b=f(this).data("in-view"),c=null;b&&"undefined"!==typeof n[b]?c=n[b]||null:(b=++v,f(this).data("in-view",b));null!==c&&g?a.push(c):(c=new r(this,g),n[b]=c)}),e=a.length;return e?1===e?a[0]:a:c};f.isVisible=function(h,a){var c=f(h).get(0),e=c.offsetTop,b=c.offsetLeft,k=c.offsetWidth,l=c.offsetHeight,
p=0,m=0,d=0,n=0;"undefined"!==typeof a&&(p=1<Math.abs(a.left)?a.left:a.left*k,m=1<Math.abs(a.right)?a.right:a.right*k,d=1<Math.abs(a.top)?a.top:a.top*l,n=1<Math.abs(a.bottom)?a.bottom:a.bottom*l);for(;c.offsetParent;)c=c.offsetParent,e+=c.offsetTop,b+=c.offsetLeft;return e+d<g.pageYOffset+g.innerHeight&&b+p<g.pageXOffset+g.innerWidth&&e+l+n>g.pageYOffset&&b+k+m>g.pageXOffset};f(function(){f("[data-iv-detect=false],[iv-detect=false]").first().length||f("[data-iv],[iv]").inView()})}(window,document,
window.Zepto||window.jQuery);