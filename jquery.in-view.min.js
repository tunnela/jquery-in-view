/*
 2015, Lauri Tunnela (http://tunne.la)
 @license http://tunne.la/MIT.txt The MIT License
*/
!function(h,v,d,w){function m(f,a){var c=d(f);f=c.get(0);var b=function(a,e){var b=c.data("iv-"+a);null==b&&(b=c.attr("iv-"+a));null==b&&(b=e);return b},e=function(a,b){b=b||!1;return d.isFunction(a)?a.apply(f):b?d(a):a},q=null,n=!1,p=0,g={count:parseInt(b("count",1)),classVisible:b("visible","in-view"),classHidden:b("hidden","out-of-view"),classInitial:b("initial","initial-view"),target:b("target",f),offset:b("offset","0").split(/\s*,\s*/)};a=d.extend({},g,a);var g=a.offset.length,k=d.isFunction(a.classInitial)?
a.classInitial.apply(f):a.classInitial;c.addClass(k);c.trigger("initial-view");a.offset={left:a.offset[0],right:a.offset[0],top:a.offset[0],bottom:a.offset[0]};4==g?(a.offset.left=a.offset[3],a.offset.right=a.offset[1],a.offset.bottom=a.offset[2]):2==g&&(a.offset.left=a.offset[1],a.offset.right=a.offset[1]);a.offset.left=parseInt(b("offset-left",a.offset.left))||0;a.offset.right=parseInt(b("offset-right",a.offset.right))||0;a.offset.bottom=parseInt(b("offset-bottom",a.offset.bottom))||0;a.offset.top=
parseInt(b("offset-top",a.offset.top))||0;this.check=function(){if(!n){n=!0;var b=q;q=d.isVisible(f,a.offset);if(b!=q)if(b=e(a.classInitial),c.removeClass(b),q){if(c.trigger("in-view"),!a.count||p++<a.count){var b=e(a.classHidden),h=e(a.classVisible),g=e(a.target,!0);g.length&&g.addClass(h).removeClass(b);c.trigger("in-view-pass")}}else if(c.trigger("out-of-view"),!a.count||p<a.count)b=e(a.classHidden),h=e(a.classVisible),g=e(a.target,!0),g.length&&g.addClass(b).removeClass(h),c.trigger("out-of-view-pass");
n=!1}};l=l.add(f);r||(r=!0,d(h).on("load scroll",t))}var r=!1,u=0,k=[],l=d(),t=function(f){l.each(function(){var a=k[d(this).data("in-view")];a instanceof m&&a.check()})};d.fn.inView=function(f){var a=[],c=this.each(function(){var b=d(this).data("in-view"),c=null;b&&"undefined"!==typeof k[b]?c=k[b]||null:(b=++u,d(this).data("in-view",b));null!==c&&f?a.push(c):(c=new m(this,f),k[b]=c)}),b=a.length;return b?1===b?a[0]:a:c};d.isVisible=function(f,a){var c=d(f).get(0),b=c.offsetTop,e=c.offsetLeft,k=c.offsetWidth,
n=c.offsetHeight,p=0,g=0,l=0,m=0;"undefined"!==typeof a&&(p=a.left,g=a.right,l=a.top,m=a.bottom);for(;c.offsetParent;)c=c.offsetParent,b+=c.offsetTop,e+=c.offsetLeft;return b+l<h.pageYOffset+h.innerHeight&&e+p<h.pageXOffset+h.innerWidth&&b+n+m>h.pageYOffset&&e+k+g>h.pageXOffset};d(function(){d("[data-iv-detect=false],[iv-detect=false]").first().length||d("[data-iv],[iv]").inView()})}(window,document,window.Zepto||window.jQuery);