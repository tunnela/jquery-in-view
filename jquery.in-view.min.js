/*
 2015, Lauri Tunnela (http://tunne.la)
 @license http://tunne.la/MIT.txt The MIT License
*/
!function(f,u,e,p){function l(d,a){var b=e(d);d=b.get(0);var c=function(a,d){var e=b.data("iv-"+a);e===p&&(e=d);return e},g=function(a,b){b=b||!1;return e.isFunction(a)?a.apply(d):b?e(a):a},k=null,h=!1,l=0,c={count:parseInt(c("count",1)),classVisible:c("visible","in-view"),classHidden:c("hidden","out-of-view"),classInitial:c("initial","initial-view"),target:c("target",d)};a=e.extend({},c,a);c=e.isFunction(a.classInitial)?a.classInitial.apply(d):a.classInitial;b.addClass(c);b.trigger("initial-view");
this.check=function(){if(!h){h=!0;var c=g(a.classInitial);b.removeClass(c);if(e.isVisible(d)){if(0==k||null==k)if(b.trigger("in-view"),!a.count||l++<a.count){var c=g(a.classHidden),f=g(a.classVisible),m=g(a.target,!0);m.length&&m.addClass(f).removeClass(c);b.trigger("in-view-pass")}k=!0}else{if(1==k||null==k)if(b.trigger("out-of-view"),!a.count||l<a.count)c=g(a.classHidden),f=g(a.classVisible),m=g(a.target,!0),m.length&&m.addClass(c).removeClass(f),b.trigger("out-of-view-pass");k=!1}h=!1}};n=n.add(d);
q||(q=!0,e(f).on("load scroll",r))}var q=!1,t=0,h=[],n=e(),r=function(d){n.each(function(){var a=h[e(this).data("in-view")];a instanceof l&&a.check()})};e.fn.inView=function(d){var a=[],b=this.each(function(){var b=e(this).data("in-view"),c=null;b&&typeof h[b]!==p?c=h[b]||null:(b=++t,e(this).data("in-view",b));null===c||"undefined"!==typeof d?(c=new l(this,d),h[b]=c):a.push(c)}),c=a.length;return c?1===c?a[0]:a:b};e.isVisible=function(d){d=e(d).get(0);for(var a=d.offsetTop,b=d.offsetLeft,c=d.offsetWidth,
g=d.offsetHeight;d.offsetParent;)d=d.offsetParent,a+=d.offsetTop,b+=d.offsetLeft;return a<f.pageYOffset+f.innerHeight&&b<f.pageXOffset+f.innerWidth&&a+g>f.pageYOffset&&b+c>f.pageXOffset};e(function(){e("[data-iv-detect=false]").first().length||e("[data-iv]").inView()})}(window,document,window.Zepto||window.jQuery);