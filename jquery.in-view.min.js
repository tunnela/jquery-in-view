/*
 2015, Lauri Tunnela (http://tunne.la)
 @license http://tunne.la/MIT.txt The MIT License
*/
;!function(h,y,e,z){function t(c,a){var d=e(c);c=d.get(0);var b=function(a,c){var b=d.data("iv-"+a);null==b&&(b=d.attr("iv-"+a));null==b&&(b=c);return b},g=function(a,b){b=b||!1;return e.isFunction(a)?a.apply(c):b?e(a):a},q=null,m=!1,u=0,f={count:parseInt(b("count",1)),classVisible:b("visible","in-view"),classHidden:b("hidden","out-of-view"),classInitial:b("initial","initial-view"),target:b("target",c),offset:b("offset","0").split(/\s*,\s*/),inView:parseInt(b("in-view",0))||0};a=e.extend({},f,a);var f=
a.offset.length,l=e.isFunction(a.classInitial)?a.classInitial.apply(c):a.classInitial;d.addClass(l);d.trigger("initial-view");a.offset={left:a.offset[0],right:a.offset[0],top:a.offset[0],bottom:a.offset[0]};4==f?(a.offset.left=a.offset[3],a.offset.right=a.offset[1],a.offset.bottom=a.offset[2]):2==f&&(a.offset.left=a.offset[1],a.offset.right=a.offset[1]);a.offset.left=parseInt(b("offset-left",a.offset.left))||0;a.offset.right=parseInt(b("offset-right",a.offset.right))||0;a.offset.bottom=parseInt(b("offset-bottom",
a.offset.bottom))||0;a.offset.top=parseInt(b("offset-top",a.offset.top))||0;this.check=function(){if(!m){m=!0;var b=q;q=e.isVisible(c,a.inView,a.offset,k);if(b!=q)if(b=g(a.classInitial),d.removeClass(b),q){if(d.trigger("in-view"),!a.count||u++<a.count){var b=g(a.classHidden),h=g(a.classVisible),f=g(a.target,!0);f.length&&f.addClass(h).removeClass(b);d.trigger("in-view-pass")}}else if(d.trigger("out-of-view"),!a.count||u<a.count)b=g(a.classHidden),h=g(a.classVisible),f=g(a.target,!0),f.length&&f.addClass(b).removeClass(h),
d.trigger("out-of-view-pass");m=!1}};n=n.add(c);v||(v=!0,e(h).on("load scroll",w))}var v=!1,x=0,l=[],p=0,r=0,k=2,n=e(),w=function(c){c=e(this).scrollTop();var a=e(this).scrollLeft();c>p?k=2:c<p?k=0:a>r?k=1:a<r&&(k=3);p=c;r=a;n.each(function(){var a=l[e(this).data("in-view")];a instanceof t&&a.check()})};e.fn.inView=function(c){var a=[],d=this.each(function(){var b=e(this).data("in-view"),d=null;b&&"undefined"!==typeof l[b]?d=l[b]||null:(b=++x,e(this).data("in-view",b));null!==d&&c?a.push(d):(d=new t(this,
c),l[b]=d)}),b=a.length;return b?1===b?a[0]:a:d};e.isVisible=function(c,a,d,b){c=e(c).get(0);b=c.offsetTop;var g=c.offsetLeft,l=c.offsetWidth,m=c.offsetHeight,k=0,f=0,n=0,p=0;a=parseInt(a)||0;1<a&&(a/=100);"undefined"!==typeof d&&(k=d.left,f=d.right,n=d.top,p=d.bottom);for(;c.offsetParent;)c=c.offsetParent,b+=c.offsetTop,g+=c.offsetLeft;return b+n+a*m<h.pageYOffset+h.innerHeight&&g+k<h.pageXOffset+h.innerWidth&&b+m+p>h.pageYOffset&&g+l+f>h.pageXOffset};e(function(){e("[data-iv-detect=false],[iv-detect=false]").first().length||
e("[data-iv],[iv]").inView()})}(window,document,window.Zepto||window.jQuery);